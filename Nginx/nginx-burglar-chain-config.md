## Nginx 配置防盗链
- 盗链是一种损害原有网站合法利益，给原网站所在服务器造成额外负担的非法行为。要采取防盗链的措施，首先需要了解盗链的实现原理。 客户端向服务器请求资源时，为了减少网络带宽，提高响应时间，服务器一般不会一次将所有资源完整地传回给客户端。比如在请求一个网页时，首先会传回该网页的文本内容，当客户端浏览器在解析文本的过程中发现有图片存在时，会再次向服务器发起对该图片资源的请求，服务器将存储的图片资源再发送给客户端。在这个过程中，如果该服务器上只包含了网页的文本内容，并没有存储相关的图片资源，而是将图片资源链接到其他站点的服务器上去了，这就形成了盗链行为。
- Nginx 配置防盗链一般有三种方式，分别为对一般文件实施防盗链、对某一目录实施防盗链和利用第三方模块实施防盗链。下面分别配置这三种方式。

### Nginx 一般的防盗链
- Nginx 配置中有一个指令 `valid_referers` ，用来获取 `Referer` 头域中的值，并且根据该值的情况给 Nginx 全局变量 `$invalid_referer` 的值，如果 `Referer` 头域中没有符合 `valid_referers` 指令配置的值，`$invalid_referer` 变量将会被赋值为 1。

